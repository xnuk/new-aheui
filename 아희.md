### 언어의 명칭
이 언어는 이 언어를 부르는 명칭이 아직 정해지지 않았으며, 편의상 아희(가칭)라고 부릅니다.

### 코드의 정의
- 이 문서에서의 "아희 코드"라 함은 0개 이상의 유니코드 문자들을 순서 있게 나열한 문자열을 뜻합니다. 모든 유니코드 문자의 나열은 실행 가능한 프로그램으로 만들 수 있는 아희 코드가 됩니다.
- 유니코드 문자가 아닌 문자가 포함된 코드는 아희 코드가 아닙니다. 코드에 그런 문자가 포함되었을 경우 이 문서는 해당 코드를 실행하거나 실행 가능한 상태로 만드는 구현체에 대해 어떠한 행동도 지시하거나 보장할 수 없습니다.
- 이 문서에서 "코드"라 함은 별다른 얘기가 없는 한 "아희 코드"를 지칭합니다.

#### 줄바꿈
코드를 줄바꿈 문자 기준으로 나누어 나오는 문자열들을 각각 "행"(row)이라고 칭합니다. 줄바꿈 문자의 정의는 [ECMAScript 2015 Language Specification - ECMA-262 6th Edition의 11.3 Line Terminators 정의](http://www.ecma-international.org/ecma-262/6.0/#sec-line-terminators)를 따릅니다.

#### 언어 확장
아희는 언어에 기능을 덧붙이거나 언어를 색다르게 해석할 수 있는 언어 확장을 지원합니다. 언어 확장을 하도록 코드 또는 외부 옵션으로 설정이 가능토록 하는 것을 "언어 확장 플래그"라 부릅니다. 이 문서에서 정의하지 않은 언어 확장 플래그 및 그에 대한 동작은 구현체마다 새로 추가가 가능하며, 기본적으로 비활성화되어 있어야 합니다. 이 문서는 이 문서에서 정의하지 않은 언어 확장 플래그를 활성화시켰을 경우에 대한 구현체의 동작을 보장하지 않습니다.

코드 안에서의 언어 확장 플래그는 맨 처음 행부터 `가`(U+AC00) 이상 `힣`(U+D7A3) 이하 구간(이하 이 구간에 속하는 문자를 "한글 음절 문자"라고 지칭합니다.) 안의 문자가 포함된 행 직전의 행까지의 구간에서 찾습니다. 맨 처음 행에 한글 음절 문자가 나온 경우 코드 내에서 설정한 언어 확장 플래그가 없다고 봅니다. 구간 내 행 중에서 다음을 만족하는 행들만 취해서 처리합니다.

- 문자열이 `#:`로 시작되어야 합니다.
- 다음 EBNF를 만족해야 합니다. 여기서 `name`은 `A`(U+0041) 이상 `Z`(U+005A) 이하 또는 `_`(U+005F)에 해당되는 문자들로만 구성된 문자열을 뜻합니다. 또 여기서 `whitespace`의 정의는 --
  ```ebnf
  row = "#:", [ whitespace ], name, [ whitespace, name ], [ whitespace ];
  ```

위 EBNF에서 첫 번째 `name`을 "플래그"라 부르고, 두 번째 `name`을 "값"이라고 부르겠습니다. 플래그가 있으나 값이 없으면 값은 `SET`으로 설정되었다고 봅니다. 각각의 플래그에는 값이 설정되어 있으며, 별도로 정의하지 않은 경우 플래그 각각의 기본값으로 설정합니다. 나중에 설정된 플래그의 값이 먼저 설정된 같은 플래그의 값보다 우선합니다.

##### 플래그별 설명
이 플래그들은 예약되었습니다. 다음은 플래그의 기본값 및 특징입니다.
- `CONDITIONAL_CANNON_JUMP`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `CANNON_JUMP`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `BIGGER_COMPARISON_RESULT`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `NEED_MORE_COPY`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `DEEP_EXCHANGE`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `CALC_SUGAR`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `OVERWRITE_REDEFINED_BATCHIMS`: 값은 `SET` 또는 `UNSET`을 갖습니다. 기본값은 `UNSET`입니다.
- `INPUT_WHITESPACE_IGNORE_LEVEL`: 값은 `ALL`, `WHITESPACE`, `LINE_BREAK`, `DO_NOT_IGNORE`를 갖습니다. 다른 값이 설정되었을 경우 `ALL`로 변경합니다. 기본값은 `ALL`입니다.

// 실행구간의 정의는 한글이 처음 나타난 행에서 마지막 나타난 행까지

### 쓰이는 환경 변수
환경 변수는 파일 맨 위쪽에, `#:` prefix를 달고 나타남.

- `CONDITIONAL_CANNON_JUMP`
- `CANNON_JUMP`
- `BIGGER_COMPARISON_RESULT`
- `NEED_MORE_COPY`
- `DEEP_EXCHANGE`
- `CALC_SUGAR`
- `OVERWRITE_REDEFINED_BATCHIMS`
- `INPUT_WHITESPACE_IGNORE_LEVEL` { `ALL`, `WHITESPACE`, `LINE_BREAK`, `DO_NOT_IGNORE` }

### ㅂ
#### ㅇ, ㅎ를 제외한 받침
받침이 나타내는 값을 저장공간에 넣습니다. 글자에 받침이 없는 경우 0을 넣습니다. 해당 값들은 받침의 획수를 기초로 정의되었으며, 다음과 같습니다.

| 값 |             받침               |
|---:|--------------------------------|
| 0  | (받침 없음)                    |
| 2  | ㄱ, ㄴ, ㅅ                     |
| 3  | ㄷ, ㅈ, ㅋ                     |
| 4  | ㅁ, ㅂ, ㅊ, ㅌ, ㅍ, ㄲ, ㄳ, ㅆ |
| 5  | ㄹ, ㄵ, ㄶ                     |
| 6  | ㅄ                             |
| 7  | ㄺ, ㄽ                         |
| 8  | ㅀ                             |
| 9  | ㄻ, ㄼ, ㄾ, ㄿ                 |

`OVERWRITE_REDEFINED_BATCHIMS` 플래그가 `SET`일 경우, ㄳ, ㄶ, ㄵ, ㄽ, ㄾ, ㄿ는 위의 표를 따르지 않고 다른 값을 가지게 되며, 그 값은 아래와 같습니다.

| 값 |받침|
|---:|----|
|  1 | ㄳ |
| 10 | ㄶ |
| 11 | ㄵ |
| 12 | ㄽ |
| 13 | ㄾ |
| 14 | ㄿ |


#### ㅇ 받침
입력값에서 숫자를 가져와 저장공간에 넣습니다. 해당 과정은 다음과 같습니다.

1. 입력값에서 `0`(U+0030) 이상 `9`(U+0039) 이하의 문자들이 1개 이상 연속되어 나열되어 있는 구간들 중 가장 최근에 입력된 구간을 찾습니다.
2. 해당 구간을 10진수 숫자를 나타낸 문자열로 취급합니다. 구간의 바로 앞에 문자가 있으며 그것이 `-`(U+002D)일 경우, 해당 구간을 앞에 음수 기호가 생략된 10진수 음수 문자열로 취급하고, 아닐 경우 양수 기호가 생략된 10진수 양수 문자열로 취급합니다. 또한 구간 내 나중에 입력된 숫자 문자일수록 0에 가까운 자리를 뜻하는 수가 됩니다. 이 문자열을 숫자로 변환한 값을 저장공간에 넣습니다.
3. 해당 구간 및 해당 구간보다 최근에 입력된 문자들을 입력값에서 버립니다.

#### ㅎ 받침
입력값에서 유니코드 문자를 가져와 저장공간에 유니코드 문자 값을 넣습니다. 해당 과정은 다음과 같습니다.

1. 이 과정에서의 공백 문자와 줄바꿈 문자의 정의는 ECMAScript 2015 Language Specification - ECMA-262 6th Edition의 [Table 32 — White Space Code Points](http://www.ecma-international.org/ecma-262/6.0/#table-32)(공백 문자)와 [Table 33 — Line Terminator Code Points](http://www.ecma-international.org/ecma-262/6.0/#table-33)(줄바꿈 문자)에서 언급된 문자들을 따릅니다.
2. `INPUT_WHITESPACE_IGNORE_LEVEL` 플래그가 `ALL`인 경우, 입력값 중 공백 문자 또는 줄바꿈 문자가 아닌 가장 최근에 입력된 유니코드 문자 하나를 선택합니다.
3. `INPUT_WHITESPACE_IGNORE_LEVEL` 플래그가 `WHITESPACE`인 경우, 입력값 중 공백 문자가 아닌 가장 최근에 입력된 유니코드 문자 하나를 선택합니다.
4. `INPUT_WHITESPACE_IGNORE_LEVEL` 플래그가 `LINE_BREAK`인 경우, 입력값 중 줄바꿈 문자가 아닌 가장 최근에 입력된 유니코드 문자 하나를 선택합니다.
5. `INPUT_WHITESPACE_IGNORE_LEVEL` 플래그가 `DO_NOT_IGNORE`인 경우, 입력값 중 가장 최근에 입력된 유니코드 문자 하나를 선택합니다.
6. 선택한 문자의 유니코드값을 저장공간에 넣습니다.
7. 선택했던 위치에 해당되는 문자 및 그보다 먼저 입력된 문자들을 입력값에서 버립니다.
